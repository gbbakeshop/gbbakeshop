import{r,u as S,m as b,j as u,a as l,c as f}from"./app-3485f549.js";import{u as D}from"./useDispatch-8bd9ff98.js";async function L(a){return(await axios.post("/api/get_domination",a)).data}async function A(a){return(await axios.post("/api/create_domination",a)).data}function T(){const a=D(),[c,e]=r.useState(!1),[m,o]=r.useState(!0),{date:d}=S(t=>t.branchExpenses),[p,i]=r.useState([{sign:"₱",bills:1e3,pcs:0,total:0},{sign:"₱",bills:500,pcs:0,total:0},{sign:"₱",bills:200,pcs:0,total:0},{sign:"₱",bills:100,pcs:0,total:0},{sign:"₱",bills:50,pcs:0,total:0},{sign:"₱",bills:20,pcs:0,total:0},{sign:"₱",bills:10,pcs:0,total:0},{sign:"₱",bills:5,pcs:0,total:0},{sign:"₱",bills:1,pcs:0,total:0},{sign:"¢",bills:0,pcs:0,total:0}]),h=[{sign:"₱",bills:1e3,pcs:0,total:0},{sign:"₱",bills:500,pcs:0,total:0},{sign:"₱",bills:200,pcs:0,total:0},{sign:"₱",bills:100,pcs:0,total:0},{sign:"₱",bills:50,pcs:0,total:0},{sign:"₱",bills:20,pcs:0,total:0},{sign:"₱",bills:10,pcs:0,total:0},{sign:"₱",bills:5,pcs:0,total:0},{sign:"₱",bills:1,pcs:0,total:0},{sign:"¢",bills:0,pcs:0,total:0}],x=(t,s)=>{i(g=>{const n=[...g];return n[t]={...n[t],pcs:s,total:s*n[t].bills},n})},y=p.reduce((t,s)=>t+s.total,0);function k(){return{status:"loading",message:"Loading..."}}r.useEffect(()=>{L({date:d}).then(t=>{b(d).format("L")<b().format("L")?(i(h),o(!0),e(!1)):t.status.length!==0?(o(!0),i(t.status),e(!1)):(i(h),o(!1),e(!1))}).catch(t=>{e(!1)})},[d]);function w(){e(!0),a(f(k())),A({branchid:0,domination:p,date:b().format("L")}).then(t=>{o(!0),e(!1),a(f(t))}).catch(t=>{o(!1),e(!1),a(f(res))})}const N=[...p].sort((t,s)=>s.bills-t.bills);return u("div",{className:"relative overflow-x-auto",children:["TOTAL ACTUAL CASH ON HAND: ₱ ",y,l("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:l("tbody",{children:N.map((t,s)=>u("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[u("th",{scope:"row",className:"px-6 py-2 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:[t.sign," ",t.bills]}),l("td",{className:"px-6 py-2",children:m?t.pcs:l("input",{type:"number",onInput:g=>x(s,g.target.value),defaultValue:t.pcs,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-1.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"})}),l("td",{className:"px-6 py-2",children:t.total})]},s))})}),!m&&l("button",{disabled:c,onClick:w,class:"mt-5 w-full bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 border border-red-700 rounded",children:"Save"})]})}export{T as default};
