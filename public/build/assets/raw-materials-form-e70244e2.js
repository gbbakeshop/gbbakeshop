import{r as d,j as m,a as e,i as u,g as w}from"./app-46232a11.js";import{I as l}from"./input-6c82e017.js";import{c as y}from"./ingredients-services-ac6e3043.js";import{u as v}from"./useDispatch-f35e2f52.js";function E({selected:f,data:p}){const r=d.useRef(),[g,i]=d.useState(!1),n=p.filter(a=>f.includes(a.id)),s=v();function h(a){a.preventDefault(),i(!0);const t=new FormData(r.current),b=n.map((o,c)=>({raw_materials:n[c],quantity:t.get(`quantity_${c}`)})),x={code:t.get("code"),target:t.get("target"),ingredients:b};setTimeout(async()=>{const o=await y(x);s(u(o)),o.status=="success"&&r.current.reset(),setTimeout(()=>{i(!1),s(w()),s(u([]))},2e3)},1e3)}return m("form",{name:"form",ref:r,onSubmit:h,className:"flex flex-col h-full w-full",children:[e(l,{name:"code",title:"Ingredients Code",placeholder:"Enter ingredients code",type:"number"}),e(l,{name:"target",title:"Target Pieces",placeholder:"Enter target pieces",type:"number"}),e("div",{className:"flex-1",children:n.map((a,t)=>e("div",{className:"flex-none",children:e(l,{name:`quantity_${t}`,title:a.raw_materials,placeholder:"Enter Grams",type:"number"})},t))}),e("div",{className:"flex-none",children:g?e("button",{disabled:!0,className:"flex-none w-full items-center align-center justify-center bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded bottom-0",children:m("center",{children:["Loading...",e("div",{className:"spinner"})]})}):e("button",{className:"flex-none w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded bottom-0",children:"SUBMIT"})}),e("br",{})]})}export{E as default};
